<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>שירותי מערכת והיבטים נוספים - מערכות הפעלה</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700&family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style/base.css">
    <script src="script/sidebar.js"></script>

    
 
</head>
<body>
    <!-- סרגל ניווט צף -->
    <div class="nav-sidebar">
        <div class="nav-sidebar-title">תוכן העניינים</div>
        <ul class="nav-main-menu">
            <!-- קטגוריה: יסודות תהליכים -->
            <li class="nav-category">
                <a href="javascript:void(0)" class="category-title">🧱 יסודות תהליכים</a>
                <ul class="nav-submenu">
                    <li><a href="#process-definition">מהו תהליך?</a></li>
                    <li><a href="#memory-allocation">זיכרון והקצאת משאבים</a></li>
                    <li><a href="#process-states">מצבי תהליך וגרף מעבר</a></li>
                    <li><a href="#memory-management-unit">גוף ניהול זיכרון (PCB)</a></li>
                </ul>
            </li>
            
            <!-- קטגוריה: ניהול וריצה -->
            <li class="nav-category">
                <a href="javascript:void(0)" class="category-title">⚙️ ניהול וריצה</a>
                <ul class="nav-submenu">
                    <li><a href="#scheduling">תיזמון תהליכים</a></li>
                    <li><a href="#context-switching">החלפת הקשר</a></li>
                    <li><a href="#process-creation">יצירת תהליך</a></li>
                    <li><a href="#process-termination">סיום תהליך</a></li>
                </ul>
            </li>
            
            <!-- קטגוריה: יישומים מתקדמים -->
            <li class="nav-category">
                <a href="javascript:void(0)" class="category-title">📱 יישומים מתקדמים</a>
                <ul class="nav-submenu">
                    <li><a href="#multitasking-mobile">ריבוי משימות במערכות טלפונים</a></li>
                    <li><a href="#android-hierarchy">היררכיה של תהליך באנדרואיד</a></li>
                    <li><a href="#chrome-multiprocess">ארכיטקטורה מרובת תהליכים – Chrome</a></li>
                    <li><a href="#ipc">תקשורת בין תהליכים (IPC)</a></li>
                </ul>
            </li>

            <!-- קטגוריה: בעיות סנכרון -->
            <li class="nav-category">
                <a href="javascript:void(0)" class="category-title">🔄 בעיות סנכרון</a>
                <ul class="nav-submenu">
                    <li><a href="#producer-consumer-problem">בעיית יצרן-צרכן</a></li>
                </ul>
            </li>
        </ul>
        <div class="back-home">
            <a href="index.html">🏠 חזרה לדף הבית</a>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>ניהול תהליכים – </h1>
            <div class="subtitle">Process Management </div>
        </div>

        <!-- מהו תהליך? -->
        <div class="content-section" id="process-definition">
            <h2>❓ מהו תהליך? (Process Definition)</h2>
            <p>תהליך הוא יישות אקטיבית: מסגרת להרצת תוכנה בתוך מערכת ההפעלה. התוכנית (קוד) רצה בתוך התהליך, אך המסגרת עצמה אחראית על הקצאת משאבים, מעקב ומידע ניהולי. אין אפשרות להריץ קוד בלי תהליך מתאים. לכל תהליך מוקצה מזהה ייחודי (PID) המגדירו במערכת ההפעלה :contentReference[oaicite:23]{index=23}. התהליך דורש משאבים כגון CPU, זיכרון, קבצים ומכשירי קלט/פלט, ומערכת ההפעלה מנהלת את הקצאתם.</p>
            <div class="feature-list">
                <li><strong>PID ייחודי:</strong> מספר גדול מאפס המזהה כל תהליך בנפרד במערכת :contentReference[oaicite:24]{index=24}.</li>
                <li><strong>משאבים נדרשים:</strong> CPU, טיימר לתיזמון, זיכרון (stack, heap), קבצים פתוחים, התקני I/O.</li>
                <li><strong>הבדלה בין תוכנה לתהליך:</strong> התוכנה היא הקוד, התהליך הוא המסגרת שמריצה את הקוד.</li>
                <li><strong>יצירת תהליך:</strong> מתקיים באמצעות קריאות מערכת – fork/spawn – ומערכת ההפעלה יוצרת מבנה נתונים לניהולו.</li>
            </div>
        </div>

        <!-- זיכרון והקצאת משאבים -->
        <div class="content-section" id="memory-allocation">
            <h2>💾 זיכרון והקצאת משאבים (Stack & Heap)</h2>
            <p>ניהול זיכרון הוא חלק חשוב בתהליך: לכל תהליך מוקצים אזורים בזיכרון הראשי, כולל סטאק (stack) לאחסון פרמטרים וקריאות פונקציות, ו-heap לאחסון דינמי. מערכת ההפעלה עוקבת אחר גבולות הזיכרון של כל תהליך דרך רגיסטרים ורשומות בּ־PCB .</p>
            <div class="feature-list">
                <li><strong>מחסנית (Stack):</strong> אזור LIFO שמוקצה באופן אוטומטי לקריאות פונקציות, פרמטרים, משתני מקומיים. גודלה מוגבל, ושמירה על גבולות מונעת חריגה מזיכרון של תהליכים אחרים.</li>
                <li><strong>ערימה (Heap):</strong> אזור לזיכרון דינמי, מנוהל דרך alloc/free או מנגנון ניהול זיכרון בשפות גבוהות (garbage collection). גודלו גמיש אך תחת מגבלות מערכת.</li>
                <li><strong>רגיסטרים לניהול זיכרון:</strong> PC, SP, BP ואחרים מורים על התחלת וסיום אזורים, ומערכת ההפעלה מעדכנת אותם בעת context switch :contentReference[oaicite:25]{index=25}.</li>
                <li><strong>מעקב והקצאה:</strong> ה־MMU והליבה עוקבים אחרי אילו דפי זיכרון מוקצים, תומכים ב־virtual memory ושחלוף לדיסק לפי צורך :contentReference[oaicite:26]{index=26}.</li>
            </div>

            <h3 onclick="toggleContent(this.querySelector('.toggle-btn'))" style="cursor: pointer;">מבנה זיכרון תהליך <button class="toggle-btn" onclick="toggleContent(this)">▼</button></h3>
            <div class="collapsible-content">
                <p>כל תהליך מקבל מרחב זיכרון וירטואלי משלו המחולק לאזורים שונים. הדיאגרמה הבאה מציגה את מבנה הזיכרון האופייני לתהליך:</p>
                
                <div class="visual-diagram">
                    <svg width="100%" height="500px" viewBox="0 0 600 500" xmlns="http://www.w3.org/2000/svg">
                        <!-- רקע -->
                        <rect x="150" y="50" width="300" height="400" fill="rgba(30, 41, 59, 0.3)" stroke="#94a3b8" stroke-width="2" rx="10"/>
                        
                        <!-- Stack -->
                        <rect x="170" y="70" width="260" height="80" fill="#ef4444" stroke="#dc2626" stroke-width="2" rx="5"/>
                        <text x="300" y="115" text-anchor="middle" fill="#ffffff" font-size="18" font-weight="bold">Stack</text>
                        <text x="300" y="135" text-anchor="middle" fill="#fecaca" font-size="14">משתנים מקומיים, פרמטרים</text>
                        
                        <!-- חץ למטה מהStack -->
                        <path d="M 300 150 L 300 190" stroke="#f87171" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                        
                        <!-- Free Space -->
                        <rect x="170" y="190" width="260" height="60" fill="#60a5fa" stroke="#3b82f6" stroke-width="2" rx="5" opacity="0.3"/>
                        <text x="300" y="225" text-anchor="middle" fill="#dbeafe" font-size="16" font-weight="bold">זיכרון פנוי</text>
                        
                        <!-- חץ למעלה מהHeap -->
                        <path d="M 300 300 L 300 260" stroke="#34d399" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                        
                        <!-- Heap -->
                        <rect x="170" y="310" width="260" height="60" fill="#10b981" stroke="#059669" stroke-width="2" rx="5"/>
                        <text x="300" y="345" text-anchor="middle" fill="#ffffff" font-size="18" font-weight="bold">Heap</text>
                        <text x="300" y="360" text-anchor="middle" fill="#a7f3d0" font-size="14">הקצאה דינמית</text>
                        
                        <!-- Data -->
                        <rect x="170" y="380" width="260" height="30" fill="#8b5cf6" stroke="#7c3aed" stroke-width="2" rx="5"/>
                        <text x="300" y="400" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">Data</text>
                        
                        <!-- Text -->
                        <rect x="170" y="420" width="260" height="30" fill="#f59e0b" stroke="#d97706" stroke-width="2" rx="5"/>
                        <text x="300" y="440" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">Text (Code)</text>
                        
                        <!-- תוויות צד -->
                        <text x="50" y="75" text-anchor="middle" fill="#f87171" font-size="14" font-weight="bold">כתובות גבוהות</text>
                        <text x="50" y="440" text-anchor="middle" fill="#fbbf24" font-size="14" font-weight="bold">כתובות נמוכות</text>
                        
                        <!-- חצים מתארים -->
                        <path d="M 460 110 Q 520 110 520 140" stroke="#cbd5e1" stroke-width="2" fill="none"/>
                        <text x="530" y="165" text-anchor="start" fill="#cbd5e1" font-size="12">גודל משתנה</text>
                        <text x="530" y="180" text-anchor="start" fill="#cbd5e1" font-size="12">גדל כלפי מטה</text>
                        
                        <path d="M 460 340 Q 520 340 520 310" stroke="#cbd5e1" stroke-width="2" fill="none"/>
                        <text x="530" y="280" text-anchor="start" fill="#cbd5e1" font-size="12">גודל משתנה</text>
                        <text x="530" y="295" text-anchor="start" fill="#cbd5e1" font-size="12">גדל כלפי מעלה</text>
                        
                        <!-- כותרת -->
                        <text x="300" y="30" text-anchor="middle" fill="#f1f5f9" font-size="20" font-weight="bold">מבנה זיכרון תהליך</text>
                    </svg>
                </div>
                
                <div class="feature-list">
                    <li><strong>Stack (מחסנית):</strong> גדל כלפי מטה, מכיל משתני מקומיים, פרמטרי פונקציות ומידע החזרה. גודל מוגבל וניהול אוטומטי.</li>
                    <li><strong>Heap (ערימה):</strong> גדל כלפי מעלה, משמש להקצאת זיכרון דינמית (malloc, new). ניהול ידני או אוטומטי (GC).</li>
                    <li><strong>Data:</strong> משתנים גלובליים ומאותחלים, קבועים וטבלאות סטטיות.</li>
                    <li><strong>Text:</strong> קוד התוכנית עצמו, בדרך כלל לקריאה בלבד ומוגן מפני שינויים.</li>
                    <li><strong>זיכרון פנוי:</strong> האזור בין Stack ל-Heap יכול להשתמש על ידי שניהם בהתאם לצורך.</li>
                </div>
                
                <div class="highlight-box">
                    <strong>חשוב לזכור:</strong> כל תהליך רואה מרחב זיכרון וירטואלי רציף, אך פיזית הזיכרון יכול להיות מפוזר על פני דפים שונים במערכת.
                </div>
            </div>
        </div>

        <!-- מצבי תהליך וגרף מעבר -->
        <div class="content-section" id="process-states">
            <h2>🔄 מצבי תהליך וגרף מעבר (Process States & Transitions)</h2>
            <p>תהליך עובר בין מצבים שונים במהלך חייו: נוצר → מוכן → רץ → ממתין/חסום → הסתיים. כל מעבר בין מצבים קורה בעקבות אירועים כגון תיזמון, קריאת מערכת או סיום עבודה .</p>
            <div class="visual-diagram">
                <!-- SVG לגרף מצבי תהליך -->
                <svg width="100%" height="350px" viewBox="0 0 800 350" xmlns="http://www.w3.org/2000/svg">
                    <!-- מצבים -->
                    <!-- New -->
                    <ellipse cx="100" cy="175" rx="70" ry="35" fill="#3b82f6" stroke="#1e40af" stroke-width="3"/>
                    <text x="100" y="180" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">New</text>
                    
                    <!-- Ready -->
                    <ellipse cx="250" cy="100" rx="70" ry="35" fill="#8b5cf6" stroke="#7c3aed" stroke-width="3"/>
                    <text x="250" y="105" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">Ready</text>
                    
                    <!-- Running -->
                    <ellipse cx="450" cy="100" rx="70" ry="35" fill="#10b981" stroke="#059669" stroke-width="3"/>
                    <text x="450" y="105" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">Running</text>
                    
                    <!-- Waiting -->
                    <ellipse cx="450" cy="250" rx="70" ry="35" fill="#f59e0b" stroke="#d97706" stroke-width="3"/>
                    <text x="450" y="255" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">Waiting</text>
                    
                    <!-- Terminated -->
                    <ellipse cx="650" cy="175" rx="80" ry="35" fill="#ef4444" stroke="#dc2626" stroke-width="3"/>
                    <text x="650" y="180" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">Terminated</text>
                    
                    <!-- חצים -->
                    <defs>
                        <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto">
                            <polygon points="0 0, 12 4, 0 8" fill="#f1f5f9"/>
                        </marker>
                    </defs>
                    
                    <!-- New → Ready (admitted) -->
                    <path d="M 170 165 Q 200 130 235 125" stroke="#f1f5f9" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="170" y="140" text-anchor="middle" fill="#60a5fa" font-size="13" font-weight="bold">admitted</text>
                    
                    <!-- Ready → Running (scheduler dispatch) -->
                    <line x1="320" y1="100" x2="380" y2="100" stroke="#f1f5f9" stroke-width="3" marker-end="url(#arrowhead)"/>
                    <text x="350" y="75" text-anchor="middle" fill="#c084fc" font-size="13" font-weight="bold">dispatch</text>
                    
                    <!-- Running → Ready (interrupt/time slice) -->
                    <path d="M 380 110 Q 350 125 320 110" stroke="#f1f5f9" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="360" y="150" text-anchor="middle" fill="#34d399" font-size="13" font-weight="bold">interrupt</text>
                    
                    <!-- Running → Waiting (I/O request) -->
                    <line x1="450" y1="135" x2="450" y2="215" stroke="#f1f5f9" stroke-width="3" marker-end="url(#arrowhead)"/>
                    <text x="530" y="165" text-anchor="start" fill="#fbbf24" font-size="13" font-weight="bold">I/O request</text>
                    
                    <!-- Waiting → Ready (I/O completion) -->
                    <path d="M 380 250 Q 315 225 290 135" stroke="#f1f5f9" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="280" y="210" text-anchor="middle" fill="#fb923c" font-size="13" font-weight="bold">I/O complete</text>
                    
                    <!-- Running → Terminated (exit) -->
                    <path d="M 520 110 Q 585 142 650 150" stroke="#f1f5f9" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="585" y="125" text-anchor="middle" fill="#f87171" font-size="13" font-weight="bold">exit</text>
                    
                    <!-- כותרת -->
                    <text x="400" y="30" text-anchor="middle" fill="#f1f5f9" font-size="20" font-weight="bold">מעברי מצבים של תהליך במערכת ההפעלה</text>
                    
                    <!-- מקרא -->
                    <rect x="50" y="300" width="700" height="40" fill="rgba(15, 23, 42, 0.3)" stroke="rgba(148, 163, 184, 0.2)" rx="5"/>
                    <text x="400" y="320" text-anchor="middle" fill="#cbd5e1" font-size="14">
                        כל תהליך עובר בין מצבים אלה לפי אירועים: יצירה → מוכן → ריצה → המתנה/סיום
                    </text>
                </svg>
            </div>
            <div class="feature-list">
                <li><strong>נוצר → מוכן:</strong> לאחר יצירת התהליך, מערכת ההפעלה מקצה משאבים ומכניסה אותו לתור מוכן :contentReference[oaicite:27]{index=27}.</li>
                <li><strong>מוכן → רץ:</strong> מתרחש כשהמתזמן בוחר אותו להרצה לפי מדיניות תזמון :contentReference[oaicite:28]{index=28}.</li>
                <li><strong>רץ → ממתין:</strong> בעת קריאת מערכת שחוסמת (I/O), התהליך עובר למצב ממתין עד שה-I/O מסתיים :contentReference[oaicite:29]{index=29}.</li>
                <li><strong>ממתין → מוכן:</strong> כשהאירוע עליו המתין מסתיים, מועבר חזרה לתור מוכן.</li>
                <li><strong>רץ → הסתיים:</strong> לאחר סיום הקוד או קריאת מערכת terminate, מערכת ההפעלה משחררת משאבים ומסירה את ה־PCB :contentReference[oaicite:30]{index=30}.</li>
                <li><strong>מוכן → הסתיים:</strong> במקרים של הריגה (kill) לפני שריצה החלה.</li>
            </div>
        </div>

        <!-- גוף ניהול זיכרון (PCB & MM) -->
        <div class="content-section" id="memory-management-unit">
            <h2>🗂️ גוף ניהול זיכרון (PCB ושמירת מצבים)</h2>
            <p>ה־PCB (Process Control Block) הוא מבנה נתונים פנימי בקרנל השומר מידע ניהולי על כל תהליך בנפרד: PID, מצב התהליך, מונה תוכנית (PC), תוכן רגיסטרים, פרטי תיזמון, פרטי ניהול זיכרון, מידע חשבונאי (שימוש CPU, מגבלות זמן) ומידע על I/O פתוח :contentReference[oaicite:31]{index=31}. אין גישה ישירה ל־PCB ממצב משתמש; הקרנל מנהל ושומר את הנתונים הללו.</p>
            <div class="visual-diagram">
                <div class="hierarchy-box">
                    <div class="layer">📑 PCB</div>
                    <div class="arrow">↓</div>
                    <div class="layer">🔢 PID, State, PC, Registers</div>
                    <div class="arrow">↓</div>
                    <div class="layer">📈 Scheduling Info & Memory Bounds</div>
                    <div class="arrow">↓</div>
                    <div class="layer">💾 I/O Info & Accounting</div>
                </div>
            </div>
            <div class="feature-list">
                <li><strong>שמירת רגיסטרים:</strong> במהלך החלפת הקשר, התוכן של רגיסטרים נשמר ב־PCB כדי שניתן יהיה להמשיך מאוחר יותר.</li>
                <li><strong>גבולות זיכרון:</strong> ה־PCB מכיל אינדיקציה לגבולות אזורי הזיכרון (stack, heap) של התהליך, כדי למנוע חריגה לזיכרון של תהליכים אחרים :contentReference[oaicite:32]{index=32}.</li>
                <li><strong>נשים לב:</strong> גוף ניהול הזיכרון עצמו נמצא בקרנל; המנגנונים (MMU, page tables) פועלים ברקע.</li>
            </div>
        </div>

        <!-- תיזמון תהליכים -->
        <div class="content-section" id="scheduling">
            <h2>⏱️ תיזמון תהליכים (Process Scheduling)</h2>
            <p>התיזמון אחראי על בחירת התהליך הבא שיורץ: המטרה למקסם שימוש CPU, לספק תגובתיות ואיזון בין תהליכים. המתזמן שומר תורים: תור מוכן ותורי המתנה. תהליכים עוברים לתור מוכן כשהם נוצרים או משוחררים ממצב המתנה :contentReference[oaicite:33]{index=33}.</p>
            <div class="feature-list">
                <li><strong>תור מוכן:</strong> סט תהליכים הממתינים ל־CPU בזיכרון הראשי.</li>
                <li><strong>תורי המתנה:</strong> תהליכים הממתינים לאירוע כגון I/O.</li>
                <li><strong>מדיניות תזמון נפוצות:</strong> FCFS, Round Robin (עם time slice), Priority-based, Multi-level Queue.</li>
                <li><strong>שיקולי זמן פרוסת זמן:</strong> פרוסות קצרות משפרות תגובתיות אך מעלות overhead של החלפת הקשר; פרוסות ארוכות מפחיתות overhead אך עשויות לגרום לעיכוב בתגובות :contentReference[oaicite:34]{index=34}.</li>
                <li><strong>מעקב ומדידה:</strong> ה־PCB מכיל מידע על זמן ריצה, זמנים קודמים, סטטיסטיקות לבחירת תהליך עתידי.</li>
            </div>
        </div>

        <!-- החלפת הקשר -->
        <div class="content-section" id="context-switching">
            <h2>🔄 החלפת הקשר (Context Switching)</h2>
            <p>כאשר ה־CPU עובר מתהליך אחד לאחר, יש לבצע שמירת מצב התהליך הישן וטעינת מצב התהליך החדש מה־PCB שלו. זו פעולה לא-יעילה במובן שאינה מקדמת עבודה ישירה, ולכן יש למזער את תדירותה תוך שמירה על תגובתיות ויעילות .</p>
            <div class="feature-list">
                <li><strong>שמירת מצבים:</strong> שמירת תוכן רגיסטרים, מונה תוכנית, מצביעי זיכרון ב־PCB.</li>
                <li><strong>טעינת מצבים:</strong> עדכון רגיסטרים וגבולות זיכרון לפי התהליך החדש.</li>
                <li><strong>גורמי השהייה:</strong> מורכבות PCB, תמיכה בחומרה (למשל TLB flush), ותדירות החלפה.</li>
                <li><strong>בחירת גודל time slice:</strong> משפיע ישירות על תדירות context switch ועל תגובת המערכת.</li>
            </div>
            <h3 onclick="toggleContent(this.querySelector('.toggle-btn'))" style="cursor: pointer;">תהליך החלפת הקשר וה-PCB <button class="toggle-btn" onclick="toggleContent(this)">▼</button></h3>
            <div class="collapsible-content">
                <p>הדיאגרמה הבאה מתארת כיצד מתרחשת החלפת הקשר בין שני תהליכים, כולל שמירת נתונים ב-PCB של כל תהליך:</p>
                
                <div class="visual-diagram">
                    <svg width="100%" height="600px" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
                        <!-- רקע -->
                        <rect x="50" y="50" width="800" height="500" fill="rgba(30, 41, 59, 0.3)" stroke="#94a3b8" stroke-width="2" rx="10"/>
                        
                        <!-- תהליך P0 -->
                        <rect x="70" y="70" width="150" height="60" fill="#3b82f6" stroke="#1e40af" stroke-width="2" rx="5"/>
                        <text x="145" y="100" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">process P₀</text>
                        
                        <!-- מערכת הפעלה -->
                        <rect x="350" y="70" width="200" height="60" fill="#8b5cf6" stroke="#7c3aed" stroke-width="2" rx="5"/>
                        <text x="450" y="100" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">operating system</text>
                        
                        <!-- תהליך P1 -->
                        <rect x="680" y="70" width="150" height="60" fill="#10b981" stroke="#059669" stroke-width="2" rx="5"/>
                        <text x="755" y="100" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">process P₁</text>
                        
                        <!-- קווי חיים -->
                        <line x1="145" y1="130" x2="145" y2="520" stroke="#f1f5f9" stroke-width="3"/>
                        <line x1="755" y1="130" x2="755" y2="520" stroke="#f1f5f9" stroke-width="3"/>
                        
                        <!-- מצב executing של P0 -->
                        <rect x="120" y="150" width="50" height="80" fill="#3b82f6" opacity="0.8"/>
                        <text x="120" y="200" fill="#60a5fa" font-size="14" font-weight="bold">executing</text>
                        
                        <!-- חץ interrupt -->
                        <path d="M 145 230 L 350 260" stroke="#f59e0b" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                        <text x="255" y="230" text-anchor="middle" fill="#fbbf24" font-size="14" font-weight="bold">interrupt or system call</text>
                        
                        <!-- שמירת מצב ב-PCB0 -->
                        <rect x="350" y="250" width="200" height="30" fill="#94a3b8" stroke="#64748b" stroke-width="2" rx="3"/>
                        <text x="450" y="270" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">save state into PCB₀</text>
                        
                        <!-- נקודות המתנה -->
                        <circle cx="450" cy="300" r="3" fill="#cbd5e1"/>
                        <circle cx="450" cy="320" r="3" fill="#cbd5e1"/>
                        <circle cx="450" cy="340" r="3" fill="#cbd5e1"/>
                        
                        <!-- טעינת מצב מ-PCB1 -->
                        <rect x="350" y="360" width="200" height="30" fill="#94a3b8" stroke="#64748b" stroke-width="2" rx="3"/>
                        <text x="450" y="380" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">reload state from PCB₁</text>
                        
                        <!-- חץ להעברת שליטה ל-P1 -->
                        <path d="M 550 375 L 680 375" stroke="#10b981" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                        
                        <!-- מצב idle של P0 -->
                        <rect x="120" y="250" width="50" height="150" fill="transparent" stroke="#3b82f6" stroke-width="2" stroke-dasharray="5,5"/>
                        <text x="90" y="330" fill="#60a5fa" font-size="14" font-weight="bold">idle</text>
                        
                        <!-- מצב executing של P1 -->
                        <rect x="730" y="330" width="50" height="80" fill="#10b981" opacity="0.8"/>
                        <text x="830" y="380" fill="#34d399" font-size="14" font-weight="bold">executing</text>
                        
                        <!-- חץ interrupt שני -->
                        <path d="M 755 410 L 550 440" stroke="#f59e0b" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                        <text x="650" y="470" text-anchor="middle" fill="#fbbf24" font-size="14" font-weight="bold">interrupt or system call</text>
                        
                        <!-- שמירת מצב ב-PCB1 -->
                        <rect x="350" y="430" width="200" height="30" fill="#94a3b8" stroke="#64748b" stroke-width="2" rx="3"/>
                        <text x="450" y="450" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">save state into PCB₁</text>
                        
                        <!-- נקודות המתנה שניות -->
                        <circle cx="450" cy="480" r="3" fill="#cbd5e1"/>
                        <circle cx="450" cy="500" r="3" fill="#cbd5e1"/>
                        <circle cx="450" cy="520" r="3" fill="#cbd5e1"/>
                        
                        <!-- טעינת מצב מ-PCB0 -->
                        <rect x="280" y="520" width="200" height="30" fill="#94a3b8" stroke="#64748b" stroke-width="2" rx="3"/>
                        <text x="380" y="540" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">reload state from PCB₀</text>
                        
                        <!-- חץ חזרה ל-P0 -->
                        <path d="M 280 535 L 170 535" stroke="#3b82f6" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                        
                        <!-- מצב idle של P1 -->
                        <rect x="730" y="430" width="50" height="100" fill="transparent" stroke="#10b981" stroke-width="2" stroke-dasharray="5,5"/>
                        <text x="830" y="485" fill="#34d399" font-size="14" font-weight="bold">idle</text>
                        
                        <!-- מצב executing חוזר של P0 -->
                        <rect x="120" y="520" width="50" height="30" fill="#3b82f6" opacity="0.8"/>
                        <text x="120" y="540" fill="#60a5fa" font-size="14" font-weight="bold">executing</text>
                        
                        <!-- הגדרת חצים -->
                        <defs>
                            <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto">
                                <polygon points="0 0, 12 4, 0 8" fill="#f1f5f9"/>
                            </marker>
                        </defs>
                        
                        <!-- כותרת -->
                        <text x="450" y="30" text-anchor="middle" fill="#f1f5f9" font-size="18" font-weight="bold">דיאגרמת החלפת הקשר (Context Switch)</text>
                        
                    </svg>
                </div>
                
                <div class="highlight-box">
                    <h4>מה קורה בכל שלב?</h4>
                    <div class="feature-list">
                        <li><strong>שמירת מצב:</strong> כאשר התהליך מפסיק לרוץ (interrupt או system call), מערכת ההפעלה שומרת את כל הרגיסטרים, מונה התוכנית (PC), מצביעי המחסנית ומידע נוסף ב-PCB של התהליך.</li>
                        <li><strong>בחירת תהליך חדש:</strong> המתזמן בוחר איזה תהליך ירוץ הבא מתוך תור התהליכים המוכנים.</li>
                        <li><strong>טעינת מצב:</strong> מערכת ההפעלה טוענת את המצב השמור של התהליך החדש מה-PCB שלו - כל הרגיסטרים, PC והגדרות זיכרון.</li>
                        <li><strong>המשך ריצה:</strong> התהליך החדש ממשיך בדיוק מהנקודה שבה הפסיק, כאילו לא קרה כלום.</li>
                    </div>
                </div>
                
                <div class="code-example">
                    <div class="comment">/* מבנה PCB מופשט */</div>
                    <span class="keyword">struct</span> PCB {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span> process_id;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span> process_state;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">struct</span> cpu_context {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span> pc;  <span class="comment">// Program Counter</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span> sp;  <span class="comment">// Stack Pointer</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span> registers[32];  <span class="comment">// All CPU registers</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;} context;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">struct</span> memory_info memory;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">struct</span> scheduling_info sched;<br>
                    };
                </div>
                
                <p><strong>חשיבות החלפת הקשר:</strong> זהו המנגנון הבסיסי המאפשר ריבוי משימות במערכות הפעלה מודרניות. ללא יכולת זו, רק תהליך אחד יכול לרוץ בכל זמן נתון עד לסיומו המלא.</p>
            </div>
        </div>

        <!-- ריבוי משימות במערכות טלפונים -->
        <div class="content-section" id="multitasking-mobile">
            <h2>📱 ריבוי משימות במערכות טלפונים (Multitasking in Mobile Systems)</h2>
            <p>במערכות טלפונים ניידים קיימת תמיכה בריבוי משימות עם מגבלות אנרגיה, מגבלות זמן אמת ותנאי חומרה מיוחדים. לעיתים החומרה מספקת קבוצות רגיסטרים או מנגנונים להעברת הקשר מהירה לתהליכים שונים (בשימוש בעיקר ב-RTOS) :contentReference[oaicite:35]{index=35}.</p>
            <div class="feature-list">
                <li><strong>ניהול אנרגיה:</strong> השהיית משימות ברקע, השבתת ליבות CPU שאינן בשימוש.</li>
                <li><strong>תזמון זמן אמת:</strong> קביעת עדיפויות גבוהות למשימות קריטיות (לדוגמה, טיפול בקריאות, ממשק משתמש) מול משימות רקע (סינכרון, עדכונים).</li>
                <li><strong>הקשר מהיר:</strong> תמיכה בחומרה ומנגנוני kernel שמאפשרים context switch מהיר כדי לעמוד בזמני תגובה קפדניים.</li>
                <li><strong>בידוד תהליכים:</strong> sandboxing ומגבלות משאבים למניעת הצפת זיכרון/CPU על ידי תהליך יחיד.</li>
                <li><strong>סביבות לפיתוח:</strong> מערכות הפעלה ייעודיות מובייל (Android, iOS) מספקות API וניהול lifecycle לתהליכים ואפליקציות עם בקרת זיכרון קפדנית.</li>
            </div>
        </div>
        <!-- יצירת תהליך -->
        <div class="content-section" id="process-creation">
            <h2>➕ יצירת תהליך (Process Creation)</h2>
            <p>תהליך הורה יכול ליצור תהליכי ילדים, שיכולים ליצור תת-תהליכים, וכך נוצר עץ תהליכים. יצירת תהליך כרוכה בהקצאת מבנה ניהולי חדש (PCB) והעתקת תמונת מצב האב (בדומה ל־fork בלינוקס). ברוב מערכות ההפעלה בלינוקס משתמשים ב־fork, והבן מקבל PID ייחודי; לאחר fork, הבן יכול להחליף קוד באמצעות exec כדי להריץ תוכנית חדשה. יש קריאות כמו wait אצל ההורה כדי להמתין לסיום הילד ולהחזיר קוד סטטוס.</p>
            <div class="feature-list">
            <li><strong>PCB חדש:</strong> שמירת PID, מצב ראשוני, קצבות משאבים, קשר להורה.</li>
            <li><strong>fork/exec:</strong> בלינוקס fork יוצר העתק של ההורה; exec מחליף את תמונת התהליך. הערך המוחזר מ־fork מזהה האם בת או הורה.</li>
            <li><strong>המתנה וסינכרון:</strong> הורה יכול לקרוא wait כדי לקבל סטטוס סיום של הילד; אם ההורה מסתיים בלי לקרוא wait, הילד מאומץ לעתים על ידי PID 1 כדי למנוע יתום.</li>
            <li><strong>סוגי תהליכים:</strong> תהליך חזית (foreground) נשלט ממשק משתמש, תהליכי רקע (background services) כמו באנדרואיד – שירותים שרצים גם אם הממשק מושעה.</li>
            </div>
            <h3 onclick="toggleContent(this.querySelector('.toggle-btn'))" style="cursor: pointer;">יצירת תהליך <button class="toggle-btn" onclick="toggleContent(this)">▼</button></h3>
            <div class="collapsible-content">
                <p>כאשר תהליך נוצר, הוא יכול לשתף משאבים עם תהליך האב שלו בדרכים שונות:</p>
                <ul class="feature-list">
                    <li><strong>שיתוף משאבים:</strong> האב והבן יכולים לשתף משאבים כמו קבצים פתוחים, זיכרון, או התקני I/O.</li>
                    <li><strong>ירושת משאבים:</strong> הבן יורש חלק ממשאבי האב, אך ייתכן שיבצע בהם שינויים עצמאיים.</li>
                    <li><strong>אין שיתוף:</strong> האב והבן פועלים בנפרד לחלוטין, ללא שיתוף משאבים.</li>
                </ul>
                <p>ביצוע תהליכים:</p>
                <ul class="feature-list">
                    <li><strong>זמן CPU:</strong> מתחלק בין האב לבן לפי מדיניות התזמון.</li>
                    <li><strong>סנכרון:</strong> האב יכול להמתין לסיום הבן באמצעות קריאת wait.</li>
                </ul>
                <p>בלינוקס, יצירת תהליך מתבצעת באמצעות קריאת fork(). בזמן יצירת הבן, הוא מהווה העתק של האב וממשיך מהשורה שבה fork() נקראה. אם הבן רוצה להחליף את הקוד שלו, הוא מבצע קריאת exec() שמחליפה את הטקסט שלו בטקסט אחר.</p>
                <div class="highlight-box">
                    <strong>חשוב:</strong> קריאת wait() מאפשרת לאב להמתין לסיום הבן. הערך המוחזר מ-fork() הוא 0 עבור הבן, ומספר ה-PID של הבן עבור האב. ערך שלילי מציין כישלון ביצירת תהליך.
                </div>
              
            </div>
        </div>

        <!-- סיום תהליך -->
        <div class="content-section" id="process-termination">
            <h2>✖️ סיום תהליך (Process Termination)</h2>
            <p>תהליך מסיים את פעולתו באמצעות קריאת מערכת exit, ואז מערכת ההפעלה משחררת משאבים: זיכרון, קבצים פתוחים, מבני נתונים. ההורה יכול לקרוא wait כדי לקבל סטטוס סיום ולנקות זומבים. במקרים מסוימים ההורה יכול לסיים באופן פיריאורי תהליכי ילדים באמצעות abort או kill במידה והילד חריג במשאבים.</p>
            <div class="feature-list">
            <li><strong>קריאת exit:</strong> התהליך מבצע פעולה אחרונה, מעדכן סטטוס סיום.</li>
            <li><strong>wait של ההורה:</strong> מחזיר PID של הילד שהסתיים וסטטוס; אם לא קוראים wait, תהליך נותר כ"זומבי" עד שהמערכת מנקה אותו.</li>
            <li><strong>הריגת ילדים:</strong> הורה יכול להזיז סיום לילדיו אם הם חרגו ממשאבים או בהתאם למדיניות מערכת (e.g., באנדרואיד הורגת תהליכים פחות חשובים כדי לפנות זיכרון).</li>
            <li><strong>סיום עץ תהליכים:</strong> ברוב מערכות, אם הורה מסתיים, ילדיו מסתיימים (או מאומצים להורה אחר כמו init), למנוע יתומים או זומבים בלתי מנוקים.</li>
            </div>
            <h3 onclick="toggleContent(this.querySelector('.toggle-btn'))" style="cursor: pointer;">סיום תהליך <button class="toggle-btn" onclick="toggleContent(this)">▼</button></h3>
            <div class="collapsible-content">
                <p>כאשר תהליך מסיים את פעולתו, מערכת ההפעלה מבצעת את השלבים הבאים:</p>
                <ul class="feature-list">
                    <li><strong>שחרור משאבים:</strong> זיכרון, קבצים פתוחים, ותהליכי משנה משוחררים על ידי מערכת ההפעלה.</li>
                    <li><strong>עדכון סטטוס:</strong> סטטוס הסיום נשמר ב־PCB של התהליך ומועבר להורה באמצעות קריאת wait().</li>
                    <li><strong>זומבים:</strong> אם ההורה לא קורא wait(), התהליך נשאר במצב זומבי עד שהמערכת מנקה אותו.</li>
                    <li><strong>יתומים:</strong> אם ההורה מסתיים לפני הילד, התהליך היתום מאומץ על ידי תהליך init (PID 1).</li>
                </ul>
                <div class="highlight-box">
                    <strong>דוגמה:</strong> תהליך הורה יכול לקרוא wait() כדי לקבל את ה־PID והסטטוס של הילד שהסתיים:
                    <div class="code-example">
                        <div class="comment">// דוגמה לקריאת wait()</div>
                        <span class="keyword">int</span> status;<br>
                        <span class="keyword">pid_t</span> pid = wait(&status);<br>
                        <span class="comment">// pid מכיל את מזהה התהליך של הילד שהסתיים</span><br>
                        <span class="comment">// status מכיל את סטטוס הסיום</span>
                    </div>
                </div>
                <p>במערכות כמו אנדרואיד, תהליכים פחות חשובים עשויים להיסגר אוטומטית כדי לפנות משאבים לתהליכים קריטיים.</p>
            </div>
        </div>

        <!-- היררכיה של תהליך באנדרואיד -->
        <div class="content-section" id="android-hierarchy">
            <h2>📱 היררכיה של תהליך באנדרואיד (Android Process Hierarchy)</h2>
            <p>באנדרואיד מערכת ההפעלה מנהלת תהליכים לפי חשיבות ומשאבים: יש תהליכים חזיתיים (foreground) עם ממשק משתמש פעיל, תהליכי רקע (background services) לשירותי מערכת, ותהליכים חסרי ממשק (no UI) המשתמשים בזיכרון מועט. באנדרואיד, כאשר נדרשים משאבים, המערכת יכולה לסיים תהליכים פחות חשובים כדי לפנות זיכרון.</p>
            <div class="feature-list">
            <li><strong>תהליך חזית (Foreground):</strong> מקבל עדיפות מירבית; ממשק משתמש פעיל.</li>
            <li><strong>תהליך רקע (Background Service):</strong> מבצע פעולות ללא ממשק ישיר, יכול להמשיך גם כשהמשתמש עובר לאפליקציה אחרת.</li>
            <li><strong>תהליכי שירות (Service Processes):</strong> מופעלים עבור שירותי אפליקציה (e.g., סנכרון, נוטיפיקציות); נהנים מפחות אילוצים בזיכרון לעומת UI אך עדיין נגזרים ממדיניות המערכת.</li>
            <li><strong>הריגה מבוססת חשיבות:</strong> מערכת אנדרואיד הורגת תחילה תהליכים עם חשיבות נמוכה (cached), לפי למידת דפוסי שימוש של המשתמש כדי לשפר חוויית משתמש בעת חזרה לאפליקציה.</li>
            <li><strong>עץ תהליכים:</strong> תהליכים יוצרים ילדים (Services או Threads); מערכת האנדרואיד שומרת היררכיה ומטפלת בסיום בהתאם למדיניות חשיבות.</li>
            </div>
        </div>

        <!-- ארכיטקטורה מרובת תהליכים – Chrome -->
        <div class="content-section" id="chrome-multiprocess">
            <h2>🌐 ארכיטקטורה מרובת תהליכים – Chrome (Multiprocessor Architecture)</h2>
            <p>דפדפן Google Chrome משתמש בארכיטקטורה מרובת תהליכים כדי להגביר יציבות וביטחון: תהליך נפרד לכל רינדור של אתר, תהליך מנהל UI, תהליכי פלאג-אין ועוד. כאשר אתר גורם לקריסה בתהליך רינדר, שאר התהליכים ממשיכים לפעול.</p>
            <div class="feature-list">
            <li><strong>תהליך UI מרכזי:</strong> מנהל ממשק המשתמש, קלט/פלט וקבצים.</li>
            <li><strong>תהליך Renderer:</strong> רינדור דפי אינטרנט (HTML, JavaScript), נוצר עבור כל אתר או טאב; רץ בארגז חול להגבלה אבטחתית.</li>
            <li><strong>תהליכי Plug-in:</strong> לכל פלאגין תהליך נפרד, למניעת פגיעה בדפדפן כולו.</li>
            <li><strong>יתרונות:</strong> בידוד שגיאות – קריסה בתהליך אחד לא משפיעה על אחרים; אבטחה – sandboxing; ניהול משאבים ברור.</li>
            <li><strong>חסרונות:</strong> עלות זיכרון גבוהה יותר עקב שכפול משאבים; תקשורת בין תהליכים מורכבת יותר.</li>
            </div>
        </div>

        <!-- תקשורת בין תהליכים (IPC) -->
        <div class="content-section" id="ipc">
            <h2>🔗 תקשורת בין תהליכים (Inter-Process Communication)</h2>
            <p>IPC מאפשר לתהליכים לשתף מידע או לסנכרן פעולות. קיימים שני מודלים עיקריים: זיכרון משותף, והעברת הודעות (message passing).</p>
            <div class="feature-list">
            <li><strong>Shared Memory:</strong> אזור בזיכרון שממופה לשני תהליכים או יותר; דורש סינכרון (locks, semaphores) כדי למנוע התנגשויות; מתבצע באמצעות מספר קריאות מערכת להקצאה, mapping והרשאות גישה.</li>
            <li><strong>Message Passing:</strong> הודעות עוברות דרך הקרנל: תהליך שולח הודעה לתור מסוים, תהליך אחר מקבל; דורש קריאות מערכת send/receive; מתאים לתקשורת בין תהליכים שאינם בשיתוף זיכרון ויש צורך בבידוד גבוה יותר.</li>
            <li><strong>בחירת מודל:</strong> Shared Memory מהיר יותר לתעבורה גבוהה, אך מורכב יותר בסינכרון; Message Passing בטוח יותר אך עלול להיות איטי יותר עקב מעבר דרך הקרנל.</li>
            <li><strong>יישום במובייל ודפדפנים:</strong> באנדרואיד וב־Chrome, תהליכי Renderer ו־UI מתקשרים באמצעות IPC מבוסס message passing לסנכרון ובדיקת הרשאות (sandbox).</li>
            </div>
            <h3 onclick="toggleContent(this.querySelector('.toggle-btn'))" style="cursor: pointer;">גרף תקשורת בין תהליכים <button class="toggle-btn" onclick="toggleContent(this)">▼</button></h3>
            <div class="collapsible-content">
                <p>הגרף הבא מציג את שני המודלים העיקריים לתקשורת בין תהליכים: זיכרון משותף והעברת הודעות.</p>
                <div class="visual-diagram">
                    <svg width="100%" height="500px" viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
                        <!-- רקע -->
                        <rect x="50" y="50" width="800" height="400" fill="rgba(30, 41, 59, 0.3)" stroke="#94a3b8" stroke-width="2" rx="10"/>
                        
                        <!-- כותרת -->
                        <text x="450" y="30" text-anchor="middle" fill="#f1f5f9" font-size="20" font-weight="bold">מודלים לתקשורת בין תהליכים</text>
                        <text x="250" y="80" text-anchor="middle" fill="#60a5fa" font-size="16" font-weight="bold">זיכרון משותף (Shared Memory)</text>
                        <text x="650" y="80" text-anchor="middle" fill="#34d399" font-size="16" font-weight="bold">העברת הודעות (Message Passing)</text>
                        
                        <!-- מודל זיכרון משותף (א) -->
                        <g transform="translate(80, 100)">
                            <!-- process A -->
                            <rect x="0" y="0" width="150" height="40" fill="#3b82f6" stroke="#1e40af" stroke-width="2" rx="5"/>
                            <text x="75" y="25" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">process A</text>
                            
                            <!-- shared memory -->
                            <rect x="0" y="50" width="150" height="30" fill="#8b5cf6" stroke="#7c3aed" stroke-width="2" rx="5"/>
                            <text x="75" y="70" text-anchor="middle" fill="#ffffff" font-size="12" font-weight="bold">shared memory</text>
                            
                            <!-- process B -->
                            <rect x="0" y="90" width="150" height="40" fill="#3b82f6" stroke="#1e40af" stroke-width="2" rx="5"/>
                            <text x="75" y="115" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">process B</text>
                            
                            <!-- kernel -->
                            <rect x="0" y="150" width="150" height="40" fill="#64748b" stroke="#475569" stroke-width="2" rx="5"/>
                            <text x="75" y="175" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">kernel</text>
                            
                            <!-- חצים דו-כיווניים לזיכרון משותף -->
                            <path d="M 150 40 L 150 50" stroke="#f1f5f9" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                            
                            <path d="M 150 90 L 150 80" stroke="#f1f5f9" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                            
                            <!-- תווית (א) -->
                            <text x="75" y="220" text-anchor="middle" fill="#f1f5f9" font-size="16" font-weight="bold">(א)</text>
                        </g>
                        
                        <!-- מודל העברת הודעות (ב) -->
                        <g transform="translate(500, 100)">
                            <!-- process A -->
                            <rect x="0" y="0" width="150" height="40" fill="#10b981" stroke="#059669" stroke-width="2" rx="5"/>
                            <text x="75" y="25" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">process A</text>
                            
                            <!-- process B -->
                            <rect x="0" y="50" width="150" height="40" fill="#10b981" stroke="#059669" stroke-width="2" rx="5"/>
                            <text x="75" y="75" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">process B</text>
                            
                            <!-- message queue -->
                            <rect x="0" y="95" width="150" height="50" fill="#f59e0b" stroke="#d97706" stroke-width="2" rx="5"/>
                            <text x="75" y="110" text-anchor="middle" fill="#ffffff" font-size="12" font-weight="bold">message queue</text>
                            
                            <!-- הודעות בתור -->
                            <rect x="10" y="115" width="12" height="20" fill="#fed7aa" stroke="#fdba74" stroke-width="1" rx="2"/>
                            <text x="16" y="127" text-anchor="middle" fill="#000" font-size="8">m₀</text>
                            
                            <rect x="25" y="115" width="12" height="20" fill="#fed7aa" stroke="#fdba74" stroke-width="1" rx="2"/>
                            <text x="31" y="127" text-anchor="middle" fill="#000" font-size="8">m₁</text>
                            
                            <rect x="40" y="115" width="12" height="20" fill="#fed7aa" stroke="#fdba74" stroke-width="1" rx="2"/>
                            <text x="46" y="127" text-anchor="middle" fill="#000" font-size="8">m₂</text>
                            
                            <rect x="55" y="115" width="12" height="20" fill="#fed7aa" stroke="#fdba74" stroke-width="1" rx="2"/>
                            <text x="61" y="127" text-anchor="middle" fill="#000" font-size="8">m₃</text>
                            
                            <text x="75" y="127" text-anchor="middle" fill="#000" font-size="8">...</text>
                            
                            <rect x="125" y="115" width="15" height="20" fill="#fed7aa" stroke="#fdba74" stroke-width="1" rx="2"/>
                            <text x="132.5" y="127" text-anchor="middle" fill="#000" font-size="8">mₙ</text>
                            
                            <!-- kernel -->
                            <rect x="0" y="150" width="150" height="40" fill="#64748b" stroke="#475569" stroke-width="2" rx="5"/>
                            <text x="75" y="175" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">kernel</text>
                            
                            <!-- חצים להעברת הודעות -->
                            <path d="M 10 40 L 10 110" stroke="#f1f5f9" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                            <path d="M 150 110 L 150 90" stroke="#f1f5f9" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                            
                            <!-- תווית (ב) -->
                            <text x="75" y="220" text-anchor="middle" fill="#f1f5f9" font-size="16" font-weight="bold">(ב)</text>
                        </g>
                        
                        <!-- הגדרת חצים -->
                        <defs>
                            <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto">
                                <polygon points="0 0, 12 4, 0 8" fill="#f1f5f9"/>
                            </marker>
                        </defs>
                        
                        <!-- הסבר מתחת -->
                        <text x="225" y="380" text-anchor="middle" fill="#cbd5e1" font-size="12">שיתוף זיכרון ישיר</text>
                        <text x="225" y="395" text-anchor="middle" fill="#cbd5e1" font-size="12">מהיר אך דורש סינכרון</text>
                        
                        <text x="575" y="380" text-anchor="middle" fill="#cbd5e1" font-size="12">תקשורת דרך תור הודעות</text>
                        <text x="575" y="395" text-anchor="middle" fill="#cbd5e1" font-size="12">בטוח יותר אך איטי יותר</text>
                    </svg>
                </div>
                <div class="feature-list">
                    <li><strong>Shared Memory:</strong> מתאים לתעבורה גבוהה בין תהליכים, אך דורש מנגנוני סינכרון מורכבים כדי למנוע התנגשויות.</li>
                    <li><strong>Message Passing:</strong> בטוח יותר, שכן כל הודעה עוברת דרך הקרנל, אך עלול להיות איטי יותר עקב overhead של קריאות מערכת.</li>
                    <li><strong>שימושים:</strong> זיכרון משותף נפוץ במערכות עם תהליכים קרובים (לדוגמה, threads), בעוד העברת הודעות נפוצה במערכות מבוזרות או עם sandboxing.</li>
                </div>
                <div class="highlight-box">
                    <strong>חשוב:</strong> הבחירה בין המודלים תלויה בדרישות המערכת: מהירות מול אבטחה וסינכרון.
                </div>
            </div>
        </div>
        <!-- בעיית יצרן-צרכן -->
        <div class="content-section" id="producer-consumer-problem">
            <h2>🔁 בעיית יצרן-צרכן (Producer-Consumer Problem)</h2>
            <p>
                בעיה קלאסית בתכנות מקבילי: יצרן מייצר ומכניס פריטים למאגר, צרכן מוציא מהם.
                כאשר המאגר ריק – הצרכן מחכה. כשהמאגר מלא – היצרן מחכה.
            </p>
            <div class="highlight-box">
                <strong>הבעיות העיקריות:</strong>
                <ul>
                    <li>דריסת נתונים - אם היצרן כותב בזמן שהצרכן קורא מאותו מיקום</li>
                    <li>קריאת נתונים לא מעודכנים - אם הצרכן קורא לפני שהיצרן סיים לכתוב</li>
                    <li>איבוד נתונים - אם היצרן כותב למאגר מלא</li>
                    <li>קריאה ממאגר ריק - אם הצרכן מנסה לקרוא כשאין נתונים</li>
                </ul>
            </div>

            <h3>📦 פתרון: חוצץ מעגלי עם גבול (Bounded Buffer)</h3>
            <div class="feature-list">
                <li><strong>מבנה נתונים מעגלי:</strong>
                    <ul>
                        <li>מערך בגודל קבוע N</li>
                        <li>מצביע in - לכתיבת נתונים חדשים</li>
                        <li>מצביע out - לקריאת נתונים</li>
                        <li>כאשר מגיעים לסוף, חוזרים להתחלה (מעגליות)</li>
                    </ul>
                </li>
                <li><strong>מנגנון בקרה:</strong>
                    <ul>
                        <li>שימוש בגודל N-1 במקום N למניעת בלבול בין מאגר מלא לריק</li>
                        <li>בדיקה אם המאגר מלא: (in + 1) % N == out</li>
                        <li>בדיקה אם המאגר ריק: in == out</li>
                    </ul>
                </li>
                <li><strong>סנכרון פעולות:</strong>
                    <ul>
                        <li>היצרן נחסם כאשר המאגר מלא</li>
                        <li>הצרכן נחסם כאשר המאגר ריק</li>
                        <li>שימוש בסמפורים למניעת גישה מקבילה למאגר</li>
                    </ul>
                </li>
                <li><strong>יתרונות הפתרון:</strong>
                    <ul>
                        <li>מניעת דריסת נתונים</li>
                        <li>שמירה על סדר הנתונים (FIFO)</li>
                        <li>ניצול יעיל של הזיכרון</li>
                        <li>תמיכה בקצבי עבודה שונים של יצרן וצרכן</li>
                    </ul>
                </li>
            </div>

            <div class="code-example">
                <pre><code class="language-c">// הגדרת המבנה הבסיסי
#define N 10  // גודל המאגר
int buffer[N];
int in = 0;
int out = 0;

// בדיקה אם המאגר מלא
bool is_full() {
    return ((in + 1) % N == out);
}

// בדיקה אם המאגר ריק
bool is_empty() {
    return (in == out);
}</code></pre>
            </div>

            <div class="visual-diagram">
                <div class="hierarchy-box">
                    <div class="layer">📤 יצרן</div>
                    <div class="arrow">↓</div>
                    <div class="layer">📦 חוצץ (Buffer)</div>
                    <div class="arrow">↓</div>
                    <div class="layer">📥 צרכן</div>
                </div>
            </div>

            <h3>👨‍💻 קוד יצרן (Producer)</h3>
            <div class="code-example">
        <pre><code class="language-c"><span class="keyword">while</span> (true) {
                // produce an item in next_produced
                <span class="keyword">while</span> ((in + 1) % BUFFER_SIZE == out);
                buffer[in] = next_produced;
                in = (in + 1) % BUFFER_SIZE;
        }</code></pre>
            </div>

            <h3>👩‍💻 קוד צרכן (Consumer)</h3>
            <div class="code-example">
        <pre><code class="language-c"><span class="keyword">while</span> (true) {
                <span class="keyword">while</span> (in == out);
                next_consumed = buffer[out];
                out = (out + 1) % BUFFER_SIZE;
                // consume the item
        }</code></pre>
            </div>

            <h3>⚠️ בעיה בקוד</h3>
            <div class="highlight-box">
                <strong>בעיית race condition:</strong>
                הפעולות של שינוי מונים (in, out, counter) אינן אטומיות – ייתכנו התנגשויות בגישה לזיכרון משותף. הפתרון: שימוש במנעולים (mutex/semaphore).
            </div>

            <h3 onclick="toggleContent(this.querySelector('.toggle-btn'))" style="cursor: pointer;">פתרון עם סמפורים <button class="toggle-btn" onclick="toggleContent(this)">▼</button></h3>
            <div class="collapsible-content">
                <p>סמפורים הם מנגנון סנכרון שמונע בעיות גישה מקבילה. הם מספקים שתי פעולות אטומיות:</p>
                <ul class="feature-list">
                    <li><strong>wait (P):</strong> אם הערך חיובי, מחסיר 1 מהסמפור. אחרת, התהליך נחסם.</li>
                    <li><strong>signal (V):</strong> מגדיל את ערך הסמפור ב־1 ומעיר תהליך חסום אם קיים.</li>
                </ul>
                
                <div class="code-example">
        <pre><code class="language-c"><span class="keyword">semaphore</span> mutex = 1;        <span class="comment">// בקרת גישה למאגר</span>
        <span class="keyword">semaphore</span> empty = BUFFER_SIZE;  <span class="comment">// מספר התאים הריקים</span>
        <span class="keyword">semaphore</span> full = 0;         <span class="comment">// מספר התאים המלאים</span>

        <span class="comment">// קוד היצרן</span>
        <span class="keyword">void</span> producer() {
                <span class="keyword">while</span> (true) {
                        <span class="comment">// ייצור פריט</span>
                        item = produce_item();
                        
                        wait(empty);    <span class="comment">// חכה אם המאגר מלא</span>
                        wait(mutex);    <span class="comment">// כניסה למקטע קריטי</span>
                        
                        buffer[in] = item;
                        in = (in + 1) % BUFFER_SIZE;
                        
                        signal(mutex);  <span class="comment">// יציאה ממקטע קריטי</span>
                        signal(full);   <span class="comment">// הודע שיש פריט חדש</span>
                }
        }

        <span class="comment">// קוד הצרכן</span>
        <span class="keyword">void</span> consumer() {
                <span class="keyword">while</span> (true) {
                        wait(full);     <span class="comment">// חכה אם המאגר ריק</span>
                        wait(mutex);    <span class="comment">// כניסה למקטע קריטי</span>
                        
                        item = buffer[out];
                        out = (out + 1) % BUFFER_SIZE;
                        
                        signal(mutex);  <span class="comment">// יציאה ממקטע קריטי</span>
                        signal(empty);  <span class="comment">// הודע שהתפנה מקום</span>
                        
                        <span class="comment">// צריכת הפריט</span>
                        consume_item(item);
                }
        }</code></pre>
                </div>
                
                <div class="visual-diagram">
                    <svg width="100%" height="400px" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
                        <!-- רקע -->
                        <rect x="50" y="50" width="700" height="300" fill="rgba(30, 41, 59, 0.3)" stroke="#94a3b8" stroke-width="2" rx="10"/>
                        
                        <!-- כותרת -->
                        <text x="400" y="30" text-anchor="middle" fill="#f1f5f9" font-size="20" font-weight="bold">מחזור חיים של בעיית יצרן-צרכן עם סמפורים</text>
                        
                        <!-- מאגר -->
                        <rect x="300" y="160" width="200" height="60" rx="10" fill="#334155" stroke="#60a5fa" stroke-width="3"/>
                        <text x="400" y="200" text-anchor="middle" fill="#f1f5f9" font-size="16" font-weight="bold">Buffer</text>
                        
                        <!-- תהליך יצרן -->
                        <rect x="100" y="100" width="120" height="50" rx="5" fill="#3b82f6" stroke="#1e40af" stroke-width="2"/>
                        <text x="160" y="130" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">Producer</text>
                        
                        <!-- תהליך צרכן -->
                        <rect x="580" y="100" width="120" height="50" rx="5" fill="#10b981" stroke="#059669" stroke-width="2"/>
                        <text x="640" y="130" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">Consumer</text>
                        
                        <!-- סמפורים -->
                        <circle cx="280" cy="100" r="25" fill="#3b82f6" fill-opacity="0.3" stroke="#3b82f6" stroke-width="2"/>
                        <text x="280" y="105" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">empty</text>
                        
                        <circle cx="350" cy="100" r="25" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="350" y="105" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">mutex</text>
                        
                        <circle cx="520" cy="100" r="25" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="2"/>
                        <text x="520" y="105" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">full</text>
                        
                        <!-- חצים -->
                        <defs>
                            <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto">
                                <polygon points="0 0, 12 4, 0 8" fill="#f1f5f9"/>
                            </marker>
                        </defs>
                        
                        <!-- חצים מהיצרן -->
                        <path d="M 160 150 L 160 180 L 290 180" stroke="#3b82f6" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                        <text x="200" y="170" fill="#60a5fa" font-size="14">הכנסת פריט</text>
                        
                        <path d="M 220 100 L 250 100" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                        <path d="M 220 100 L 250 80 L 325 80" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                        <path d="M 160 150 C 160 250 450 250 520 130" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                        <text x="300" y="65" text-anchor="middle" fill="#60a5fa" font-size="14">wait(empty); wait(mutex)</text>
                        <text x="400" y="265" text-anchor="middle" fill="#60a5fa" font-size="14">signal(mutex); signal(full)</text>
                        
                        <!-- חצים מהצרכן -->
                        <path d="M 640 150 L 640 180 L 510 180" stroke="#10b981" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                        <text x="600" y="170" fill="#34d399" font-size="14">הוצאת פריט</text>
                        
                        <path d="M 580 100 L 550 100" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                        <path d="M 580 100 L 550 80 L 375 80" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                        <path d="M 640 150 C 640 250 350 250 280 130" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                        <text x="500" y="65" text-anchor="middle" fill="#34d399" font-size="14">wait(full); wait(mutex)</text>
                        <text x="400" y="285" text-anchor="middle" fill="#34d399" font-size="14">signal(mutex); signal(empty)</text>
                        
                        <!-- איור המאגר -->
                        <g transform="translate(300, 300)">
                            <rect x="0" y="0" width="200" height="40" rx="5" fill="#1e293b" stroke="#60a5fa" stroke-width="1"/>
                            
                            <!-- תאי המאגר -->
                            <rect x="5" y="5" width="30" height="30" rx="3" fill="#3b82f6" stroke="#1e40af" stroke-width="1"/>
                            <rect x="40" y="5" width="30" height="30" rx="3" fill="#3b82f6" stroke="#1e40af" stroke-width="1"/>
                            <rect x="75" y="5" width="30" height="30" rx="3" fill="rgba(59, 130, 246, 0.2)" stroke="#1e40af" stroke-width="1"/>
                            <rect x="110" y="5" width="30" height="30" rx="3" fill="rgba(59, 130, 246, 0.2)" stroke="#1e40af" stroke-width="1"/>
                            <rect x="145" y="5" width="30" height="30" rx="3" fill="rgba(59, 130, 246, 0.2)" stroke="#1e40af" stroke-width="1"/>
                            
                            <!-- מחווני in/out -->
                            <text x="20" y="-5" text-anchor="middle" fill="#60a5fa" font-size="12">in</text>
                            <text x="55" y="-5" text-anchor="middle" fill="#34d399" font-size="12">out</text>
                        </g>
                    </svg>
                </div>
                
                <div class="highlight-box">
                    <strong>למה צריך שלושה סמפורים?</strong>
                    <ul>
                        <li><strong>mutex:</strong> מבטיח גישה בלעדית למאגר (מניעת race condition).</li>
                        <li><strong>empty:</strong> מונה כמה מקומות ריקים יש במאגר (מונע מהיצרן לפעול כשהמאגר מלא).</li>
                        <li><strong>full:</strong> מונה כמה פריטים יש במאגר (מונע מהצרכן לפעול כשהמאגר ריק).</li>
                    </ul>
                </div>
                
                <h4>מצבי תפעול של המערכת</h4>
                <div class="feature-list">
                    <li><strong>מאגר ריק:</strong> full=0, הצרכן נחסם ב-wait(full)</li>
                    <li><strong>מאגר מלא:</strong> empty=0, היצרן נחסם ב-wait(empty)</li>
                    <li><strong>מצב תקין:</strong> 0 < full < BUFFER_SIZE, 0 < empty < BUFFER_SIZE, שני התהליכים יכולים לפעול</li>
                    <li><strong>נקודה חשובה:</strong> סדר הקריאות wait(full/empty) ו-wait(mutex) קריטי למניעת deadlock! ביצוע בסדר הפוך עלול לגרום למצב נעילה.</li>
                </div>
                
                <div class="visual-diagram">
                    <svg width="100%" height="300px" viewBox="0 0 800 300" xmlns="http://www.w3.org/2000/svg">
                        <!-- מצבי המאגר -->
                        <g transform="translate(50, 50)">
                            <text x="150" y="0" text-anchor="middle" fill="#f1f5f9" font-size="16" font-weight="bold">מצבי המאגר</text>
                            
                            <!-- מאגר ריק -->
                            <rect x="0" y="30" width="300" height="40" rx="5" fill="#1e293b" stroke="#60a5fa" stroke-width="1"/>
                            <text x="-20" y="55" text-anchor="end" fill="#f1f5f9" font-size="14">ריק</text>
                            <rect x="5" y="35" width="30" height="30" rx="3" fill="rgba(59, 130, 246, 0.1)" stroke="#1e40af" stroke-width="1"/>
                            <rect x="40" y="35" width="30" height="30" rx="3" fill="rgba(59, 130, 246, 0.1)" stroke="#1e40af" stroke-width="1"/>
                            <rect x="75" y="35" width="30" height="30" rx="3" fill="rgba(59, 130, 246, 0.1)" stroke="#1e40af" stroke-width="1"/>
                            <rect x="110" y="35" width="30" height="30" rx="3" fill="rgba(59, 130, 246, 0.1)" stroke="#1e40af" stroke-width="1"/>
                            <rect x="145" y="35" width="30" height="30" rx="3" fill="rgba(59, 130, 246, 0.1)" stroke="#1e40af" stroke-width="1"/>
                            <text x="320" y="55" fill="#f1f5f9" font-size="14">full = 0, empty = N</text>
                            
                            <!-- מאגר בינוני -->
                            <rect x="0" y="90" width="300" height="40" rx="5" fill="#1e293b" stroke="#60a5fa" stroke-width="1"/>
                            <text x="-20" y="115" text-anchor="end" fill="#f1f5f9" font-size="14">בינוני</text>
                            <rect x="5" y="95" width="30" height="30" rx="3" fill="#3b82f6" stroke="#1e40af" stroke-width="1"/>
                            <rect x="40" y="95" width="30" height="30" rx="3" fill="#3b82f6" stroke="#1e40af" stroke-width="1"/>
                            <rect x="75" y="95" width="30" height="30" rx="3" fill="rgba(59, 130, 246, 0.1)" stroke="#1e40af" stroke-width="1"/>
                            <rect x="110" y="95" width="30" height="30" rx="3" fill="rgba(59, 130, 246, 0.1)" stroke="#1e40af" stroke-width="1"/>
                            <rect x="145" y="95" width="30" height="30" rx="3" fill="rgba(59, 130, 246, 0.1)" stroke="#1e40af" stroke-width="1"/>
                            <text x="320" y="115" fill="#f1f5f9" font-size="14">full = 2, empty = N-2</text>
                            
                            <!-- מאגר מלא -->
                            <rect x="0" y="150" width="300" height="40" rx="5" fill="#1e293b" stroke="#60a5fa" stroke-width="1"/>
                            <text x="-20" y="175" text-anchor="end" fill="#f1f5f9" font-size="14">מלא</text>
                            <rect x="5" y="155" width="30" height="30" rx="3" fill="#3b82f6" stroke="#1e40af" stroke-width="1"/>
                            <rect x="40" y="155" width="30" height="30" rx="3" fill="#3b82f6" stroke="#1e40af" stroke-width="1"/>
                            <rect x="75" y="155" width="30" height="30" rx="3" fill="#3b82f6" stroke="#1e40af" stroke-width="1"/>
                            <rect x="110" y="155" width="30" height="30" rx="3" fill="#3b82f6" stroke="#1e40af" stroke-width="1"/>
                            <rect x="145" y="155" width="30" height="30" rx="3" fill="rgba(59, 130, 246, 0.1)" stroke="#1e40af" stroke-width="1"/>
                            <text x="320" y="175" fill="#f1f5f9" font-size="14">full = N-1, empty = 1</text>
                        </g>
                        
                        <!-- טבלת סמפורים -->
                        <g transform="translate(400, 180)">
                            <text x="150" y="0" text-anchor="middle" fill="#f1f5f9" font-size="16" font-weight="bold">ערכי הסמפורים לפי מצב</text>
                            
                            <rect x="0" y="20" width="100" height="30" rx="5" fill="#3b82f6" stroke="#1e40af" stroke-width="1"/>
                            <text x="50" y="40" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">מצב</text>
                            
                            <rect x="100" y="20" width="100" height="30" rx="5" fill="#8b5cf6" stroke="#7c3aed" stroke-width="1"/>
                            <text x="150" y="40" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">empty</text>
                            
                            <rect x="200" y="20" width="100" height="30" rx="5" fill="#8b5cf6" stroke="#7c3aed" stroke-width="1"/>
                            <text x="250" y="40" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">full</text>
                            
                            <rect x="300" y="20" width="100" height="30" rx="5" fill="#8b5cf6" stroke="#7c3aed" stroke-width="1"/>
                            <text x="350" y="40" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">mutex</text>
                            
                            <!-- ריק -->
                            <rect x="0" y="50" width="100" height="30" fill="rgba(59, 130, 246, 0.2)"/>
                            <text x="50" y="70" text-anchor="middle" fill="#f1f5f9" font-size="14">ריק</text>
                            
                            <rect x="100" y="50" width="100" height="30" fill="rgba(139, 92, 246, 0.2)"/>
                            <text x="150" y="70" text-anchor="middle" fill="#f1f5f9" font-size="14">N</text>
                            
                            <rect x="200" y="50" width="100" height="30" fill="rgba(139, 92, 246, 0.2)"/>
                            <text x="250" y="70" text-anchor="middle" fill="#f1f5f9" font-size="14">0</text>
                            
                            <rect x="300" y="50" width="100" height="30" fill="rgba(139, 92, 246, 0.2)"/>
                            <text x="350" y="70" text-anchor="middle" fill="#f1f5f9" font-size="14">1</text>
                            
                            <!-- בינוני -->
                            <rect x="0" y="80" width="100" height="30" fill="rgba(59, 130, 246, 0.4)"/>
                            <text x="50" y="100" text-anchor="middle" fill="#f1f5f9" font-size="14">בינוני</text>
                            
                            <rect x="100" y="80" width="100" height="30" fill="rgba(139, 92, 246, 0.4)"/>
                            <text x="150" y="100" text-anchor="middle" fill="#f1f5f9" font-size="14">N-k</text>
                            
                            <rect x="200" y="80" width="100" height="30" fill="rgba(139, 92, 246, 0.4)"/>
                            <text x="250" y="100" text-anchor="middle" fill="#f1f5f9" font-size="14">k</text>
                            
                            <rect x="300" y="80" width="100" height="30" fill="rgba(139, 92, 246, 0.4)"/>
                            <text x="350" y="100" text-anchor="middle" fill="#f1f5f9" font-size="14">1</text>
                            
                            <!-- מלא -->
                            <rect x="0" y="110" width="100" height="30" fill="rgba(59, 130, 246, 0.6)"/>
                            <text x="50" y="130" text-anchor="middle" fill="#f1f5f9" font-size="14">מלא</text>
                            
                            <rect x="100" y="110" width="100" height="30" fill="rgba(139, 92, 246, 0.6)"/>
                            <text x="150" y="130" text-anchor="middle" fill="#f1f5f9" font-size="14">0</text>
                            
                            <rect x="200" y="110" width="100" height="30" fill="rgba(139, 92, 246, 0.6)"/>
                            <text x="250" y="130" text-anchor="middle" fill="#f1f5f9" font-size="14">N</text>
                            
                            <rect x="300" y="110" width="100" height="30" fill="rgba(139, 92, 246, 0.6)"/>
                            <text x="350" y="130" text-anchor="middle" fill="#f1f5f9" font-size="14">1</text>
                        </g>
                    </svg>
                </div>
            </div>
            <h3 onclick="toggleContent(this.querySelector('.toggle-btn'))" style="cursor: pointer;">דוגמאות מעשיות <button class="toggle-btn" onclick="toggleContent(this)">▼</button></h3>
            <div class="collapsible-content">
                <p>בעיית היצרן-צרכן נפוצה במערכות מחשוב רבות:</p>
                
                <div class="feature-list">
                    <li><strong>מערכת הפעלה:</strong> תור הודעות בין תהליכים, מאגר בקשות I/O שממתין לטיפול מנהל התקן.</li>
                    <li><strong>שרתי אינטרנט:</strong> תור בקשות HTTP המגיעות מלקוחות וממתינות לטיפול על ידי thread מתוך מאגר threads.</li>
                    <li><strong>מערכות הדפסה:</strong> תור משימות הדפסה הממתינות למדפסת.</li>
                    <li><strong>עיבוד וידאו:</strong> תהליך אחד קורא פריימים והשני מעבד אותם - מאגר ביניים מאפשר קריאה וכתיבה בקצבים שונים.</li>
                    <li><strong>מודל מפורסם:</strong> Event Loop בסביבות כמו Node.js, שבו אירועים מתווספים לתור ומעובדים בזה אחר זה.</li>
                </div>
                
                <div class="visual-diagram">
                    <svg width="100%" height="400px" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <marker id="arrowhead2" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto">
                                <polygon points="0 0, 12 4, 0 8" fill="#f1f5f9"/>
                            </marker>
                        </defs>
                        
                        <rect x="50" y="50" width="700" height="300" fill="rgba(30, 41, 59, 0.3)" stroke="#94a3b8" stroke-width="2" rx="10"/>
                        <text x="400" y="30" text-anchor="middle" fill="#f1f5f9" font-size="20" font-weight="bold">דוגמאות מעשיות לבעיית יצרן-צרכן</text>
                        
                        <!-- דוגמה 1: תור הדפסה -->
                        <rect x="100" y="80" width="120" height="40" rx="8" fill="#3b82f6" stroke="#1e40af" stroke-width="2"/>
                        <text x="160" y="105" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold">תהליך יצרן</text>
                        <rect x="250" y="90" width="200" height="30" rx="8" fill="#334155" stroke="#60a5fa" stroke-width="2"/>
                        <text x="350" y="110" text-anchor="middle" fill="#f1f5f9" font-size="13">תור משימות הדפסה</text>
                        <rect x="480" y="80" width="120" height="40" rx="8" fill="#10b981" stroke="#059669" stroke-width="2"/>
                        <text x="540" y="105" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold">מדפסת (צרכן)</text>
                        <path d="M220 100 L250 105" stroke="#60a5fa" stroke-width="3" marker-end="url(#arrowhead2)"/>
                        <path d="M450 105 L480 100" stroke="#34d399" stroke-width="3" marker-end="url(#arrowhead2)"/>
                        <text x="185" y="90" fill="#448512" font-size="12">שליחת משימה</text>
                        <text x="605" y="90" fill="#345399" font-size="12">הדפסת משימה</text>
                        
                        <!-- דוגמה 2: תור בקשות שרת -->
                        <rect x="100" y="180" width="120" height="40" rx="8" fill="#3b82f6" stroke="#1e40af" stroke-width="2"/>
                        <text x="160" y="205" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold">לקוח (יצרן)</text>
                        <rect x="250" y="190" width="200" height="30" rx="8" fill="#334155" stroke="#60a5fa" stroke-width="2"/>
                        <text x="350" y="210" text-anchor="middle" fill="#f1f5f9" font-size="13">תור בקשות HTTP</text>
                        <rect x="480" y="180" width="120" height="40" rx="8" fill="#10b981" stroke="#059669" stroke-width="2"/>
                        <text x="540" y="205" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold">שרת (צרכן)</text>
                        <path d="M220 200 L250 205" stroke="#60a5fa" stroke-width="3" marker-end="url(#arrowhead2)"/>
                        <path d="M450 205 L480 200" stroke="#34d399" stroke-width="3" marker-end="url(#arrowhead2)"/>
                        <text x="185" y="190" fill="#44410a" font-size="12">שליחת בקשה</text>
                        <text x="605" y="190" fill="#312399" font-size="12">טיפול בבקשה</text>
                        
                        <!-- דוגמה 3: עיבוד וידאו -->
                        <rect x="100" y="280" width="120" height="40" rx="8" fill="#3b82f6" stroke="#1e40af" stroke-width="2"/>
                        <text x="160" y="305" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold">קורא פריימים</text>
                        <rect x="250" y="290" width="200" height="30" rx="8" fill="#334155" stroke="#60a5fa" stroke-width="2"/>
                        <text x="350" y="310" text-anchor="middle" fill="#f1f5f9" font-size="13">מאגר פריימים</text>
                        <rect x="480" y="280" width="120" height="40" rx="8" fill="#10b981" stroke="#059669" stroke-width="2"/>
                        <text x="540" y="305" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold">מעבד וידאו</text>
                        <path d="M220 300 L250 305" stroke="#60a5fa" stroke-width="3" marker-end="url(#arrowhead2)"/>
                        <path d="M450 305 L480 300" stroke="#34d399" stroke-width="3" marker-end="url(#arrowhead2)"/>
                        <text x="185" y="290" fill="#44245a" font-size="12">הוספת פריים</text>
                        <text x="605" y="290" fill="#325399" font-size="12">עיבוד פריים</text>
                    </svg>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
